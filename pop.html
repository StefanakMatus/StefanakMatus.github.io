<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results</title>
    
    <script>
        // Listen for messages from the main window
        window.addEventListener('message', (event) => {
            const performanceData = event.data;
            console.log(performanceData);

            if (performanceData && performanceData.length > 0) {
                //get container
                const resultsDiv = document.getElementById('result_container');
                resultsDiv.innerHTML = ''; //clear previous

                //create new table
                const tableWithData = document.createElement("table");
                //create header space for table
                const header = document.createElement("tr");
                
                //specific headers
                const level_H = document.createElement("th");
                const mistakes_H = document.createElement("th")
                const time_H = document.createElement("th")

                //specific headers naming
                level_H.textContent = "LEVEL";
                mistakes_H.textContent = "MISTAKES";
                time_H.textContent = "TIME";

                //append headers to the header
                header.appendChild(level_H);
                header.appendChild(mistakes_H);
                header.appendChild(time_H);

                //add header to the table
                tableWithData.appendChild(header);

                resultsDiv.appendChild(tableWithData);

                for(let i = 0; i <= performanceData.length; i++){
                    console.log(performanceData[i]);

                    const RowOfData = document.createElement("tr");

                    // Create text content for each data point
                    const levelText = document.createElement("td");
                    levelText.textContent = performanceData[i].level;
                    
                    const mistakesText = document.createElement("td");
                    mistakesText.textContent = performanceData[i].mistakes;
                
                    const timeText = document.createElement("td");
                    timeText.textContent = performanceData[i].time;

                    // Append the text elements to the table row
                    RowOfData.appendChild(levelText);
                    RowOfData.appendChild(mistakesText);
                    RowOfData.appendChild(timeText);
                    
                    // Append the new whole row to the table
                    tableWithData.appendChild(RowOfData);
                }

            }
        });
    </script>

</head>
<body>
    <h1>Results</h1>
    <div id="result_container">
    </div>

    
</body>
</html>
